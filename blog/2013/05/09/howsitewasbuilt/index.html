
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How my other site was built - Albrechts Blog</title>
  <meta name="author" content="Albrecht Scheidig">

  
  <meta name="description" content="When planning my other blogging site I have had some ideas what I want to achieve. I wanted a typical
blog site but with extra flexibility for trying &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://aschei.github.io/blog/2013/05/09/howsitewasbuilt">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Albrechts Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Albrechts Blog</a></h1>
  
    <h2>About programming, mostly.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:aschei.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How My Other Site Was Built</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-09T17:52:00+02:00" pubdate data-updated="true">May 9<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>When planning my other blogging <a href="http://aschei.x64.me">site</a> I have had some ideas what I want to achieve. I wanted a typical
blog site but with extra flexibility for trying out other stuff and learning about
different tools I am interested in.</p>

<p>I have had a special setup in mind: hosted on my own web server, no dynamic / interpreted
content on the server side, just static pages. For sure the pages need to be generated by
a flexible enough mini CMS.</p>

<p>So instead of going on with blogger.com I wanted to control my own web server and
build it from ground up. But I also had a very limiting requirement: no cost. Yes, I want
to try out stuff without paying anything more for it.</p>

<p>So the first thing to decide was about the web server. Luckily, Amazon currently offers
a year of free testing their hosting services. I setup a server on <a href="http://aws.amazon.com">AWS</a>
with the latest Debian and read about the service details that are included in Amazons free offer.
Two things to keep in mind: First, you have absolutely no guarantee on backups being made nor
failsafety etc. So it is vital to have your setup elsewhere in case your server is being
reset to factory defaults. I chose to prepare everything on my laptop and rsync stuff in case
of changes. More on that later. Second, you have one fix IP address (they call it Elastic IP)
to be bound on your instances. In case you would like to have a meaningful web server name
using a dynamic DNS hoster, you can register the Elastic IP there and give it a go. But a more
flexible approach is to register your IP automatically when your interface is up using a script
in /etc/network/if-up.d like so:
$$code(lang=bash, style=monokai)</p>

<pre><code>PubIP=$(curl http://169.254.169.254/latest/meta-data/public-ipv4)
curl --user ${USER}:${PASSWD} https://www.dnsdynamic.org/api/?hostname=${HOST}&amp;myip=${PubIP}
</code></pre>

<p>$$/code
Note: This works if you define USER, PASSWD and HOST before.</p>

<p>The result of this setup was an always-on server reachable in the internet using a meaningful name.
Next step was to decide which http server to use. I wanted a minimalistic setup, but
after reading a while here and there I learned that there are no good alternatives to Apache or
Nginx. Since I am experienced with Apache I went with <a href="http://nginx.org">Nginx</a> to learn something
new. Well, Nginx seems to be a bit easier to setup, but in the end it is just working like Apache.</p>

<p>OK, server is running, what about the CMS? After researching a while I went with
<a href="http://www.blogofile.com/">Blogofile</a> which calls itself a &ldquo;static website compiler&rdquo;. That was
exactly what I was looking for and I installed it on my laptop.</p>

<p>Blogofile gives you for each site a basic setup including features like Blogs etc. It is Python
based (but it can be used without Python knowledge).
It uses <a href="http://www.makotemplates.org/">Mako Templates</a> as a template engine which makes it easy
to change layout and reorganize stuff. For blog posts it supports markdown which I find handy to use.</p>

<p>As a result, whenever I would like to add a blog post I have to add a markdown file in the posts directory
and redeploy the site. For redeployment I am using the following script:
$$code(lang=bash, style=monokai)</p>

<pre><code>blogofile build -s ${site}
rsync -avz -e ssh ${site}/_site/ ${sshhost}:/var/www/
</code></pre>

<p>$$/code
Works like a charm.</p>

<p>If ever the AWS server dies, I would have to reinstall and configure Nginx and the dyndns script,
done. If ever my laptop dies, I would be screwed. Setting up programs like Blogofile is no fun but
possible, but the valuable content would be lost. Therefore I commit my stuff to
<a href="http://github.com">Github</a>.</p>

<p>For me, this is a fun project. I have learned about EC2 on amazon, setting up and securing Debian,
writing shell scripts, Nginx, Blogofile, a little bit Python, and Git on Github. And it gives enough
room to play around.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Albrecht Scheidig</span></span>

      








  


<time datetime="2013-05-09T17:52:00+02:00" pubdate data-updated="true">May 9<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/technical/'>Technical</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://aschei.github.io/blog/2013/05/09/howsitewasbuilt/" data-via="" data-counturl="http://aschei.github.io/blog/2013/05/09/howsitewasbuilt/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/04/18/bug-backlog/" title="Previous Post: Avoid big bug backlogs">&laquo; Avoid big bug backlogs</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/08/01/blog-on-github-using-octopress/" title="Next Post: Blog on GitHub using Octopress">Blog on GitHub using Octopress &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/05/01/determining-affected-tests-using-coverage-info/">Determining Affected Tests Using Coverage Info</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/22/tool-dilemma/">Tool Dilemma</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/02/bye-bye-cygwin/">Bye Bye, Cygwin</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/16/a-replacement-for-truecrypt/">A Replacement for Truecrypt</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/16/howto-disable-daemons-permanently/">How to Disable Daemons Under Ubuntu 12.04 and Above</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Albrecht Scheidig -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'aschei';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://aschei.github.io/blog/2013/05/09/howsitewasbuilt/';
        var disqus_url = 'http://aschei.github.io/blog/2013/05/09/howsitewasbuilt/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
